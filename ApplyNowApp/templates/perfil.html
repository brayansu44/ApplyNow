<!DOCTYPE html>
<html lang="en">

<head>
    {% load static %}
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/x-icon" href="{% static 'assets/img/logo.png' %}" />
    <!-- Font Awesome icons (free version)-->
    <script src="https://use.fontawesome.com/releases/v6.1.0/js/all.js" crossorigin="anonymous"></script>
    <!-- Google fonts-->
    <link href="https://fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet" type="text/css" />
    <link href="https://fonts.googleapis.com/css?family=Roboto+Slab:400,100,300,700" rel="stylesheet" type="text/css" />
    <!-- Core theme CSS (includes Bootstrap)-->
    <link href="{% static 'css/styles.css' %}" rel="stylesheet" />   
    <link href="{% static 'css/login.css' %}" rel="stylesheet" />
    <link href="{% static 'css/solicitar.css' %}" rel="stylesheet" />
    <!-- ALERTYFY JS -->
    <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/alertifyjs@1.13.1/build/css/alertify.min.css"/>
    <!-- Default theme -->
    <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/alertifyjs@1.13.1/build/css/themes/default.min.css"/>
    <!-- Show Password -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <title>Perfil Usuario</title>
</head>

<body>
    <!-- Navigation-->
    <nav class="navbar navbar-expand-lg navbar-dark fixed-top" id="mainNav2">
        <div class="container">
            <a class="navbar-brand navbar-image" href="#page-top"><img src="{% static 'assets/img/logo.png' %}"
                    style="height: 70px;" alt="..." /></a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarResponsive"
                aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
                Menu
                <i class="fas fa-bars ms-1"></i>
            </button>
            <div class="collapse navbar-collapse" id="navbarResponsive">
                <ul class="navbar-nav text-uppercase ms-auto py-4 py-lg-0">
                    <li class="nav-item link"><a class="nav-link" href="{% url 'Index' %}">Inicio</a></li>
                    <li class="nav-item dropdown link">
                        <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown"
                            aria-expanded="false">
                            {{user.first_name}}
                        </a>
                        <ul class="dropdown-menu" style="background-color: #212529; border: 1px solid #212529;">
                            <li class="d-a"><a class="d-d" href="../cerrar_sesion">Cerrar Sesión</a></li>
                        </ul>
                    </li>
                </ul>
            </div>
        </div>
    </nav>
    <br><br><br><br><br><br>
    <div class="container mt-3">
        <div class="card-header2">
            <h3 class="mb-0">
                -
                <a href="{% url 'Index' %}" class="btn btn-danger float-end"><i class="fa fa-reply"></i> Volver</a>
            </h3>
        </div>


        <div class="row">

            <div class="col-md-7">
                <form action="changedate" method="POST">{% csrf_token %}
                <div class="card shadow">
                    <div class="card-body">
                        <h6>Detalles Basicos</h6>
                        <hr>
                        <!--Campos visualizar datos-->
                        <div class="row verificarForm">
                            <div id="element1" class="col-md-6 mt-2">
                                <label>Nombre</label>
                                <input type="text" class="form-control" name="nombre"
                                    placeholder="{{request.user.first_name}}" disabled required>
                            </div>
                            <div id="element1-1" class="col-md-6 mt-2">
                                <label>Apellido</label>
                                <input type="text" class="form-control" name="apellido"
                                    placeholder="{{request.user.last_name}}" disabled required>
                            </div>
                            <div id="element1-2" class="col-md-6 mt-2">
                                <label>Tipo De Documento</label>
                                <input type="text" class="form-control" name="tipo"
                                    placeholder="{{perfil_usuario.tipo}}" disabled required>
                            </div>
                            <div id="element1-3" class="col-md-6 mt-2">
                                <label>N. Documento</label>
                                <input type="text" class="form-control" name="documento"
                                    placeholder="{{perfil_usuario.documento}}" disabled required>
                            </div>
                            <div id="element1-4" class="col-md-6 mt-2">
                                <label>Cargo</label>
                                <input type="text" class="form-control" name="cargo"
                                    placeholder="{{perfil_usuario.cargo}}" disabled required>
                            </div>
                            <div id="element1-5" class="col-md-6 mt-2">
                                <label>Teléfono</label>
                                <input type="text" class="form-control" name="telefono"
                                    placeholder="{{perfil_usuario.telefono}}" disabled required>
                            </div>
                            <div id="element1-6" class="col-md-12 mt-2">
                                <label>Email</label>
                                <input type="email" class="form-control removed" name="email"
                                    placeholder="{{request.user.email}}" disabled required>
                            </div>
                        </div>
                        <!--Campos modificar datos-->
                        <div class="row verificarForm">
                            <div id="element2" class="col-md-6 mt-2 displaynone">
                                <label>Nombre</label>
                                <input type="text" class="form-control" name="nombre"
                                    value="{{request.user.first_name}}" disabled required>
                            </div>
                            <div id="element2-1" class="col-md-6 mt-2 displaynone">
                                <label>Apellido</label>
                                <input type="text" class="form-control" name="apellido"
                                    value="{{request.user.last_name}}" disabled required>
                            </div>
                            <div id="element2-2" class="col-md-6 mt-2 displaynone">
                                <label>Tipo De Documento</label>
                                <input type="text" class="form-control" name="tipo" value="{{perfil_usuario.tipo}}"
                                    disabled required>
                            </div>
                            <div id="element2-3" class="col-md-6 mt-2 displaynone">
                                <label>N. Documento</label>
                                <input type="text" class="form-control" name="documento"
                                    value="{{perfil_usuario.documento}}" disabled required>
                            </div>
                            <div id="element2-4" class="col-md-6 mt-2 displaynone">
                                <label>Cargo</label>
                                <input type="text" class="form-control" name="cargo" value="{{perfil_usuario.cargo}}"
                                    disabled required>
                            </div>
                            <div id="element2-5" class="col-md-6 mt-2 displaynone">
                                <label>Teléfono</label>
                                <input type="text" class="form-control" name="telefono"
                                    value="{{perfil_usuario.telefono}}" required>
                            </div>
                            <div id="element2-6" class="col-md-12 mt-2 displaynone">
                                <label>Email</label>
                                <input type="email" class="form-control removed" name="email"
                                    value="{{request.user.email}}" required>
                            </div>
                        </div>
                        <hr>
                        <div class="mt-3">
                            <button id="show" type="submit" class="btn btn-outline-success w-100" style="display: none;">Confirmar
                                cambios</button>
                            <button id="hide" type="button" class="btn btn-info w-100"><i class="fa fa-bookmark" aria-hidden="true"></i>    Modificar</button>

                            <hr id="---" class="displaynone">
                            <button id="elementC" onClick="refrescarPagina()" type="button"
                                class="btn btn-outline-danger w-100" style="display: none;" >Cancelar</button>
                        </div>
                    </div>
                </div>
                </form>
            </div>
            <div class="col-md-5">
                <form class="needs-validation" action="change_password" method="POST" novalidate>{% csrf_token %}
                    <div class="card shadow">
                        <div class="card-body">
                            <h6>Cambiar Contraseña</h6>
                            <hr>
                            <div class="row verificarForm">
                                <div class="col-md-6 mt-2 changepass displaynone">
                                    <label>Usuario</label>
                                    <input type="hidden" class="form-controlCP" name="usuario"
                                        placeholder="Contraseña" value="{{perfil_usuario.user}}" required>
                                    <span><i class="fa fa-user"></i></span>
                                    <div class="invalid-feedback">
                                        Este campo es obligatorio
                                    </div>  
                                </div>
                                <div id="pass1" class="col-md-12 mt-2 changepass displaynone">
                                    <label>Contraseña Actual</label>
                                    <input id="password" type="password" class="form-controlCP" name="passwordA"
                                        placeholder="Contraseña" required>
                                    <span><i class="fa fa-lock"></i></span>
                                    <div class="span1">
                                        <a id="show_password" class="btnShow btn-pass" onClick="mostrarPassword1()"> <span class="fa fa-eye-slash icon"></span> </a>
                                    </div>
                                    <div class="invalid-feedback">
                                        Este campo es obligatorio
                                    </div>  
                                </div>
                                <div id="pass1-1" class="col-md-12 mt-2 changepass displaynone">
                                    <label>Contraseña Nueva</label>
                                    <input id="passwordN" type="password" class="form-controlCP" name="passwordN"
                                        placeholder="Contraseña Nueva" required>
                                    <span><i class="fa fa-check-circle"></i></span>
                                    <div class="span1">
                                        <a id="show_password" class="btnShow btn-pass" onClick="mostrarPassword()"> <span class="fa fa-eye-slash icon"></span> </a>
                                    </div>
                                    <div class="invalid-feedback">
                                        Este campo es obligatorio
                                    </div>  
                                </div>
                            </div>
                            <div id="passSave" class="mt-3 displaynone">
                                <button type="submit" onClick="verificarPassword()" class="btn btn-outline-success w-100">Guardar</button>
                            </div>
                            <div id="passCancel" class="mt-3 displaynone">
                                <button onClick="refrescarPagina()" type="button"
                                class="btn btn-outline-danger w-100">Cancelar</button>
                            </div>
                            <div id="passHide" class="mt-3">
                                <button type="button" class="btn btn-outline-dark w-100"><i class="fa fa-unlock-alt" aria-hidden="true"></i></button>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
        </div>

    </div>
    <script src="https://code.jquery.com/jquery-3.2.1.js"></script>
    <script src="{% static 'js/scripts.js' %}"></script>
    <script src="{% static 'js/login.js' %}"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="{% static 'js/jquery.min.js' %}"></script>
    <script src="https://cdn.startbootstrap.com/sb-forms-latest.js"></script>
    <script src="//cdn.jsdelivr.net/npm/alertifyjs@1.13.1/build/alertify.min.js"></script>   
    
    <script>
        alertify.set('notifier','position', 'top-right');
    </script>
        {% if Notificador %}
            {% if Notificador == 1  %}
                {% for msg in messages %}   
                    <script>
                        alertify.success('{{msg}}');  
                    </script>
                {% endfor %}
            {% elif Notificador == 2 %}
                {% for msg in messages %}   
                    <script>
                        alertify.error('{{msg}}');  
                    </script>
                {% endfor %}
            {% elif Notificador == 3 %}
                {% for msg in messages %}   
                    <script>
                        alertify.warning('{{msg}}');  
                    </script>
                {% endfor %}
            {% elif Notificador == 4 %}
                {% for msg in messages %}   
                    <script>
                        alertify.notify('{{msg}}');
                    </script>
                {% endfor %}
            {% endif %}
        {% else %}
            {% if user.is_authenticated %}
                {% for msg in messages %}   
                    <script>
                        alertify.success('{{msg}}');  
                    </script>
                {% endfor %}
            {% else %}
                {% for msg in messages %}   
                    <script>
                        alertify.error('{{msg}}');  
                    </script>
                {% endfor %}
            {% endif %}
        {% endif %}

</body>

</html>